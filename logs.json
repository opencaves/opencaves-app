2024-04-25T11:33:28.738554Z I undefined: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:33:29.245052Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v1.CloudFunctionsService.GenerateUploadUrl","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1","permission":"cloudfunctions.functions.sourceCodeSet","granted":true,"resourceAttributes":{},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.GenerateUploadUrlRequest","parent":"projects/opencaves/locations/northamerica-northeast1"},"response":{"@type":"type.googleapis.com/google.cloud.functions.v1.GenerateUploadUrlResponse","uploadUrl":"https://storage.googleapis.com/uploads-639218082352.northamerica-northeast1.cloudfunctions.appspot.com/cb8859e9-f606-42f3-babf-36cabc1f3be5.zip?GoogleAccessId=service-800148490732@gcf-admin-robot.iam.gserviceaccount.com&Expires=1714046609&Signature=EYVAzrSJHTqdXilLJ2jT2ns9ovPEva%2Bjt9asGVvpTYAp6OuhF1Y%2BIhY9S1q%2Fb8ZUd1qIKG5WvUWotLkvC9yClrCLhrvfrMCVQjJV9SL5Tf8T%2FWHkuaMi9YWEdATEpPT4vY%2Fqn8XNsHYF8z4STnVfKY7XXtLknBWfaYNGXNntDpPSi3u1LeKtHcIcXLT87TGhn1PMH2z6Z46oKPH2wPYdpuw85lm4jAdgb9nr75tgTTPwKtw4Qm9%2FDFo2g4qbMKhPLqJ4QB3UFTf5QpgMNxhSXCJmm4CioRRmt7YDUWOjtqMIjSHz1l8yZCJHugjEcpNTwyC%2BpCJ5spqq3aTyVNmIGQ%3D%3D"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:33:40.425322Z N assignRole: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:33:40.755854Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v1.CloudFunctionsService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/assignRole","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/assignRole","request":{"function":{"runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","sourceUploadUrl":"https://storage.googleapis.com/uploads-639218082352.northamerica-northeast1.cloudfunctions.appspot.com/cb8859e9-f606-42f3-babf-36cabc1f3be5.zip?GoogleAccessId=service-800148490732@gcf-admin-robot.iam.gserviceaccount.com&Expires=1714046609&Signature=EYVAzrSJHTqdXilLJ2jT2ns9ovPEva%2Bjt9asGVvpTYAp6OuhF1Y%2BIhY9S1q%2Fb8ZUd1qIKG5WvUWotLkvC9yClrCLhrvfrMCVQjJV9SL5Tf8T%2FWHkuaMi9YWEdATEpPT4vY%2Fqn8XNsHYF8z4STnVfKY7XXtLknBWfaYNGXNntDpPSi3u1LeKtHcIcXLT87TGhn1PMH2z6Z46oKPH2wPYdpuw85lm4jAdgb9nr75tgTTPwKtw4Qm9%2FDFo2g4qbMKhPLqJ4QB3UFTf5QpgMNxhSXCJmm4CioRRmt7YDUWOjtqMIjSHz1l8yZCJHugjEcpNTwyC%2BpCJ5spqq3aTyVNmIGQ%3D%3D","entryPoint":"assignRole","name":"projects/opencaves/locations/northamerica-northeast1/functions/assignRole","eventTrigger":{"resource":"projects/opencaves","eventType":"providers/firebase.auth/eventTypes/user.create"},"labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"a77e0bf276fa4a3c4ac4bd1192925059753b8692","deployment-tool":"cli-firebase"}},"updateMask":"name,sourceUploadUrl,entryPoint,runtime,dockerRegistry,labels,eventTrigger.eventType,eventTrigger.resource,eventTrigger.failurePolicy,minInstances,maxInstances,ingressSettings,environmentVariables,serviceAccountEmail,availableMemoryMb,timeout,vpcConnector,vpcConnectorEgressSettings,sourceToken,buildEnvironmentVariables","@type":"type.googleapis.com/google.cloud.functions.v1.UpdateFunctionRequest"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:33:41.340180050Z N add: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:33:40.499983111Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/add","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/add"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/add","request":{"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","function":{"service_config":{"available_memory":"256Mi","available_cpu":"1","max_instance_request_concurrency":80},"event_trigger":{"event_type":"google.cloud.storage.object.v1.finalized","trigger_region":"northamerica-northeast1","retry_policy":"RETRY_POLICY_DO_NOT_RETRY","event_filters":[{"value":"opencaves.appspot.com","attribute":"bucket"}]},"name":"projects/opencaves/locations/northamerica-northeast1/functions/add","labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","deployment-tool":"cli-firebase"},"build_config":{"source":{},"runtime":"nodejs20","entry_point":"add"}},"update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","event_trigger.event_type","event_trigger.retry_policy","event_trigger.event_filters","event_trigger.trigger_region","build_config.build_environment_variables"]}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:27.468045Z N backfillResizedImages: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:27.851044Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v1.CloudFunctionsService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/backfillResizedImages","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/backfillResizedImages","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.UpdateFunctionRequest","updateMask":"name,sourceUploadUrl,entryPoint,runtime,dockerRegistry,labels,httpsTrigger,minInstances,maxInstances,ingressSettings,environmentVariables,serviceAccountEmail,availableMemoryMb,timeout,vpcConnector,vpcConnectorEgressSettings,sourceToken,buildEnvironmentVariables","function":{"labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"a77e0bf276fa4a3c4ac4bd1192925059753b8692","deployment-taskqueue":"true","deployment-tool":"cli-firebase"},"httpsTrigger":{},"name":"projects/opencaves/locations/northamerica-northeast1/functions/backfillResizedImages","entryPoint":"backfillResizedImages","dockerRegistry":"ARTIFACT_REGISTRY","sourceUploadUrl":"https://storage.googleapis.com/uploads-639218082352.northamerica-northeast1.cloudfunctions.appspot.com/cb8859e9-f606-42f3-babf-36cabc1f3be5.zip?GoogleAccessId=service-800148490732@gcf-admin-robot.iam.gserviceaccount.com&Expires=1714046609&Signature=EYVAzrSJHTqdXilLJ2jT2ns9ovPEva%2Bjt9asGVvpTYAp6OuhF1Y%2BIhY9S1q%2Fb8ZUd1qIKG5WvUWotLkvC9yClrCLhrvfrMCVQjJV9SL5Tf8T%2FWHkuaMi9YWEdATEpPT4vY%2Fqn8XNsHYF8z4STnVfKY7XXtLknBWfaYNGXNntDpPSi3u1LeKtHcIcXLT87TGhn1PMH2z6Z46oKPH2wPYdpuw85lm4jAdgb9nr75tgTTPwKtw4Qm9%2FDFo2g4qbMKhPLqJ4QB3UFTf5QpgMNxhSXCJmm4CioRRmt7YDUWOjtqMIjSHz1l8yZCJHugjEcpNTwyC%2BpCJ5spqq3aTyVNmIGQ%3D%3D","runtime":"nodejs20","sourceToken":"110b4551-737e-46e3-8f2f-63159d962416"}},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:29.067611373Z N api: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:28.333279987Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/api","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/api"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/api","request":{"update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","build_config.build_environment_variables"]},"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","function":{"labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","deployment-tool":"cli-firebase"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/api","build_config":{"entry_point":"api","runtime":"nodejs20","source":{},"source_token":"CmNwcm9qZWN0cy84MDAxNDg0OTA3MzIvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2J1aWxkcy83OTY1ZWNhZC0zYzM1LTRkNDUtOWU4Mi1mY2JhNWNiNTE0NjgSTG5vcnRoYW1lcmljYS1ub3J0aGVhc3QxLWRvY2tlci5wa2cuZGV2L29wZW5jYXZlcy9nY2YtYXJ0aWZhY3RzL2FkZDp2ZXJzaW9uXzEY7JPE5KQXIkJwcm9qZWN0cy9vcGVuY2F2ZXMvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2Z1bmN0aW9ucy9hZGQqCwjE/6ixBhDYn7w0Mghub2RlanMyMDoA"},"service_config":{"available_cpu":"1","available_memory":"256Mi","max_instance_request_concurrency":80}}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:29.103226787Z N beforeCreated: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:28.393243677Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/beforeCreated","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/beforeCreated"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/beforeCreated","request":{"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","build_config.build_environment_variables"]},"function":{"service_config":{"available_memory":"256Mi","max_instance_request_concurrency":80,"available_cpu":"1"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/beforeCreated","labels":{"deployment-blocking":"before-create","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","deployment-tool":"cli-firebase","firebase-functions-codebase":"js"},"build_config":{"entry_point":"beforeCreated","source":{},"runtime":"nodejs20","source_token":"CmNwcm9qZWN0cy84MDAxNDg0OTA3MzIvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2J1aWxkcy83OTY1ZWNhZC0zYzM1LTRkNDUtOWU4Mi1mY2JhNWNiNTE0NjgSTG5vcnRoYW1lcmljYS1ub3J0aGVhc3QxLWRvY2tlci5wa2cuZGV2L29wZW5jYXZlcy9nY2YtYXJ0aWZhY3RzL2FkZDp2ZXJzaW9uXzEY7JPE5KQXIkJwcm9qZWN0cy9vcGVuY2F2ZXMvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2Z1bmN0aW9ucy9hZGQqCwjE/6ixBhDYn7w0Mghub2RlanMyMDoA"}}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:29.169891322Z N setCoverImage: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:28.392713095Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/setCoverImage","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/setCoverImage"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/setCoverImage","request":{"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","function":{"labels":{"deployment-tool":"cli-firebase","firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8"},"build_config":{"entry_point":"setCoverImage","runtime":"nodejs20","source":{},"source_token":"CmNwcm9qZWN0cy84MDAxNDg0OTA3MzIvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2J1aWxkcy83OTY1ZWNhZC0zYzM1LTRkNDUtOWU4Mi1mY2JhNWNiNTE0NjgSTG5vcnRoYW1lcmljYS1ub3J0aGVhc3QxLWRvY2tlci5wa2cuZGV2L29wZW5jYXZlcy9nY2YtYXJ0aWZhY3RzL2FkZDp2ZXJzaW9uXzEY7JPE5KQXIkJwcm9qZWN0cy9vcGVuY2F2ZXMvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2Z1bmN0aW9ucy9hZGQqCwjE/6ixBhDYn7w0Mghub2RlanMyMDoA"},"service_config":{"available_memory":"256Mi","max_instance_request_concurrency":80,"available_cpu":"1"},"event_trigger":{"event_filters":[{"value":"(default)","attribute":"database"},{"value":"(default)","attribute":"namespace"},{"value":"cavesAssets/{assetId}","operator":"match-path-pattern","attribute":"document"}],"trigger_region":"northamerica-northeast1","event_type":"google.cloud.firestore.document.v1.created","retry_policy":"RETRY_POLICY_DO_NOT_RETRY"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/setCoverImage"},"update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","event_trigger.event_type","event_trigger.retry_policy","event_trigger.event_filters","event_trigger.trigger_region","build_config.build_environment_variables"]}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:29.179367464Z N onAssetUpdated: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:28.393587039Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetUpdated","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetUpdated"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetUpdated","request":{"function":{"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","firebase-functions-codebase":"js"},"event_trigger":{"trigger_region":"northamerica-northeast1","event_filters":[{"value":"(default)","attribute":"database"},{"value":"(default)","attribute":"namespace"},{"operator":"match-path-pattern","value":"cavesAssets/{assetId}","attribute":"document"}],"event_type":"google.cloud.firestore.document.v1.updated","retry_policy":"RETRY_POLICY_DO_NOT_RETRY"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetUpdated","service_config":{"available_cpu":"1","available_memory":"256Mi","max_instance_request_concurrency":80},"build_config":{"source_token":"CmNwcm9qZWN0cy84MDAxNDg0OTA3MzIvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2J1aWxkcy83OTY1ZWNhZC0zYzM1LTRkNDUtOWU4Mi1mY2JhNWNiNTE0NjgSTG5vcnRoYW1lcmljYS1ub3J0aGVhc3QxLWRvY2tlci5wa2cuZGV2L29wZW5jYXZlcy9nY2YtYXJ0aWZhY3RzL2FkZDp2ZXJzaW9uXzEY7JPE5KQXIkJwcm9qZWN0cy9vcGVuY2F2ZXMvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2Z1bmN0aW9ucy9hZGQqCwjE/6ixBhDYn7w0Mghub2RlanMyMDoA","entry_point":"onAssetUpdated","source":{},"runtime":"nodejs20"}},"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","event_trigger.event_type","event_trigger.retry_policy","event_trigger.event_filters","event_trigger.trigger_region","build_config.build_environment_variables"]}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:29.210444113Z N onAssetDeleted: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:28.393703100Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetDeleted","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetDeleted"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetDeleted","request":{"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","function":{"event_trigger":{"retry_policy":"RETRY_POLICY_DO_NOT_RETRY","trigger_region":"northamerica-northeast1","event_type":"google.cloud.firestore.document.v1.deleted","event_filters":[{"value":"(default)","attribute":"database"},{"attribute":"namespace","value":"(default)"},{"value":"cavesAssets/{assetId}","operator":"match-path-pattern","attribute":"document"}]},"service_config":{"available_memory":"256Mi","available_cpu":"1","max_instance_request_concurrency":80},"build_config":{"source_token":"CmNwcm9qZWN0cy84MDAxNDg0OTA3MzIvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2J1aWxkcy83OTY1ZWNhZC0zYzM1LTRkNDUtOWU4Mi1mY2JhNWNiNTE0NjgSTG5vcnRoYW1lcmljYS1ub3J0aGVhc3QxLWRvY2tlci5wa2cuZGV2L29wZW5jYXZlcy9nY2YtYXJ0aWZhY3RzL2FkZDp2ZXJzaW9uXzEY7JPE5KQXIkJwcm9qZWN0cy9vcGVuY2F2ZXMvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2Z1bmN0aW9ucy9hZGQqCwjE/6ixBhDYn7w0Mghub2RlanMyMDoA","source":{},"runtime":"nodejs20","entry_point":"onAssetDeleted"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetDeleted","labels":{"deployment-tool":"cli-firebase","firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8"}},"update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","event_trigger.event_type","event_trigger.retry_policy","event_trigger.event_filters","event_trigger.trigger_region","build_config.build_environment_variables"]}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:29.276892837Z N onAssetCreated: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"callerIp":"184.163.73.248","callerSuppliedUserAgent":"FirebaseCLI/13.7.1,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2024-04-25T11:34:28.394406342Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetCreated","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetCreated"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetCreated","request":{"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","function":{"service_config":{"max_instance_request_concurrency":80,"available_memory":"256Mi","available_cpu":"1"},"labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","deployment-tool":"cli-firebase"},"event_trigger":{"retry_policy":"RETRY_POLICY_DO_NOT_RETRY","trigger_region":"northamerica-northeast1","event_filters":[{"value":"(default)","attribute":"database"},{"value":"(default)","attribute":"namespace"},{"value":"cavesAssets/{assetId}","attribute":"document","operator":"match-path-pattern"}],"event_type":"google.cloud.firestore.document.v1.created"},"build_config":{"entry_point":"onAssetCreated","source_token":"CmNwcm9qZWN0cy84MDAxNDg0OTA3MzIvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2J1aWxkcy83OTY1ZWNhZC0zYzM1LTRkNDUtOWU4Mi1mY2JhNWNiNTE0NjgSTG5vcnRoYW1lcmljYS1ub3J0aGVhc3QxLWRvY2tlci5wa2cuZGV2L29wZW5jYXZlcy9nY2YtYXJ0aWZhY3RzL2FkZDp2ZXJzaW9uXzEY7JPE5KQXIkJwcm9qZWN0cy9vcGVuY2F2ZXMvbG9jYXRpb25zL25vcnRoYW1lcmljYS1ub3J0aGVhc3QxL2Z1bmN0aW9ucy9hZGQqCwjE/6ixBhDYn7w0Mghub2RlanMyMDoA","source":{},"runtime":"nodejs20"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetCreated"},"update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","service_config.vpc_connector","service_config.vpc_connector_egress_settings","labels","event_trigger.event_type","event_trigger.retry_policy","event_trigger.event_filters","event_trigger.trigger_region","build_config.build_environment_variables"]}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:34.908513Z I backfillResizedImages: {"includePathList":["/caves/*/images"],"imageTypes":["webp"],"cacheControlHeader":"public, max-age=31536000, immutable","failedImagesPath":"failed","bucket":"opencaves.appspot.com","doBackfill":true,"deleteOriginalFile":1,"outputOptions":{"webp":{"smartSubsample":true,"quality":50,"preset":"photo","effort":4}},"resizedImagesPath":"../thumbnails","makePublic":true,"location":"northamerica-northeast1","animated":true,"message":"Initializing function resize image with configuration","imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"width":1536,"fit":"outside"},"4k":{"width":3840,"fit":"outside"},"resultThumbnail":{"width":361,"fit":"outside","height":451},"coverImage":{"fit":"cover","width":601,"height":338},"mediaThumbnail":{"width":400,"height":800,"fit":"inside"}}}
2024-04-25T11:34:35.595985Z I assignRole: {"location":"northamerica-northeast1","message":"Initializing function resize image with configuration","bucket":"opencaves.appspot.com","deleteOriginalFile":1,"outputOptions":{"webp":{"smartSubsample":true,"quality":50,"effort":4,"preset":"photo"}},"includePathList":["/caves/*/images"],"animated":true,"resizedImagesPath":"../thumbnails","doBackfill":true,"cacheControlHeader":"public, max-age=31536000, immutable","imageSizes":{"1024":{"width":1024,"fit":"outside"},"1536":{"fit":"outside","width":1536},"mediaThumbnail":{"width":400,"fit":"inside","height":800},"4k":{"width":3840,"fit":"outside"},"coverImage":{"width":601,"height":338,"fit":"cover"},"resultThumbnail":{"height":451,"fit":"outside","width":361}},"makePublic":true,"imageTypes":["webp"],"failedImagesPath":"failed"}
2024-04-25T11:34:37.541447Z I onassetdeleted: {"location":"northamerica-northeast1","makePublic":true,"outputOptions":{"webp":{"effort":4,"smartSubsample":true,"preset":"photo","quality":50}},"doBackfill":true,"animated":true,"failedImagesPath":"failed","includePathList":["/caves/*/images"],"deleteOriginalFile":1,"imageTypes":["webp"],"imageSizes":{"1024":{"width":1024,"fit":"outside"},"1536":{"width":1536,"fit":"outside"},"resultThumbnail":{"height":451,"fit":"outside","width":361},"mediaThumbnail":{"fit":"inside","width":400,"height":800},"4k":{"fit":"outside","width":3840},"coverImage":{"width":601,"height":338,"fit":"cover"}},"bucket":"opencaves.appspot.com","message":"Initializing function resize image with configuration","cacheControlHeader":"public, max-age=31536000, immutable","resizedImagesPath":"../thumbnails"}
2024-04-25T11:34:37.553589Z I setcoverimage: {"imageTypes":["webp"],"includePathList":["/caves/*/images"],"failedImagesPath":"failed","message":"Initializing function resize image with configuration","imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"width":1536,"fit":"outside"},"mediaThumbnail":{"fit":"inside","width":400,"height":800},"4k":{"width":3840,"fit":"outside"},"resultThumbnail":{"height":451,"fit":"outside","width":361},"coverImage":{"height":338,"width":601,"fit":"cover"}},"doBackfill":true,"animated":true,"deleteOriginalFile":1,"location":"northamerica-northeast1","bucket":"opencaves.appspot.com","makePublic":true,"cacheControlHeader":"public, max-age=31536000, immutable","resizedImagesPath":"../thumbnails","outputOptions":{"webp":{"quality":50,"smartSubsample":true,"preset":"photo","effort":4}}}
2024-04-25T11:34:37.568370Z I onassetupdated: {"resizedImagesPath":"../thumbnails","deleteOriginalFile":1,"failedImagesPath":"failed","imageTypes":["webp"],"imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"fit":"outside","width":1536},"resultThumbnail":{"height":451,"width":361,"fit":"outside"},"mediaThumbnail":{"width":400,"height":800,"fit":"inside"},"coverImage":{"fit":"cover","width":601,"height":338},"4k":{"width":3840,"fit":"outside"}},"outputOptions":{"webp":{"quality":50,"smartSubsample":true,"effort":4,"preset":"photo"}},"animated":true,"doBackfill":true,"location":"northamerica-northeast1","makePublic":true,"cacheControlHeader":"public, max-age=31536000, immutable","bucket":"opencaves.appspot.com","includePathList":["/caves/*/images"],"message":"Initializing function resize image with configuration"}
2024-04-25T11:34:37.581007Z I onassetdeleted: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:37.591912Z I setcoverimage: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:37.609354Z I onassetupdated: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:37.935376Z I beforecreated: {"message":"Initializing function resize image with configuration","doBackfill":true,"bucket":"opencaves.appspot.com","cacheControlHeader":"public, max-age=31536000, immutable","failedImagesPath":"failed","animated":true,"deleteOriginalFile":1,"outputOptions":{"webp":{"preset":"photo","effort":4,"quality":50,"smartSubsample":true}},"resizedImagesPath":"../thumbnails","includePathList":["/caves/*/images"],"imageTypes":["webp"],"makePublic":true,"location":"northamerica-northeast1","imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"fit":"outside","width":1536},"4k":{"fit":"outside","width":3840},"mediaThumbnail":{"width":400,"height":800,"fit":"inside"},"resultThumbnail":{"height":451,"fit":"outside","width":361},"coverImage":{"height":338,"width":601,"fit":"cover"}}}
2024-04-25T11:34:37.940093Z I api: {"makePublic":true,"imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"width":1536,"fit":"outside"},"4k":{"width":3840,"fit":"outside"},"coverImage":{"fit":"cover","width":601,"height":338},"mediaThumbnail":{"fit":"inside","width":400,"height":800},"resultThumbnail":{"fit":"outside","height":451,"width":361}},"includePathList":["/caves/*/images"],"imageTypes":["webp"],"failedImagesPath":"failed","resizedImagesPath":"../thumbnails","doBackfill":true,"message":"Initializing function resize image with configuration","location":"northamerica-northeast1","deleteOriginalFile":1,"cacheControlHeader":"public, max-age=31536000, immutable","animated":true,"outputOptions":{"webp":{"quality":50,"effort":4,"preset":"photo","smartSubsample":true}},"bucket":"opencaves.appspot.com"}
2024-04-25T11:34:37.979518Z I beforecreated: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:38.006121Z I api: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:38.350768Z I onassetcreated: {"outputOptions":{"webp":{"smartSubsample":true,"effort":4,"quality":50,"preset":"photo"}},"location":"northamerica-northeast1","includePathList":["/caves/*/images"],"bucket":"opencaves.appspot.com","resizedImagesPath":"../thumbnails","makePublic":true,"imageTypes":["webp"],"imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"fit":"outside","width":1536},"resultThumbnail":{"width":361,"height":451,"fit":"outside"},"coverImage":{"height":338,"width":601,"fit":"cover"},"4k":{"fit":"outside","width":3840},"mediaThumbnail":{"height":800,"fit":"inside","width":400}},"message":"Initializing function resize image with configuration","failedImagesPath":"failed","doBackfill":true,"deleteOriginalFile":1,"animated":true,"cacheControlHeader":"public, max-age=31536000, immutable"}
2024-04-25T11:34:38.352505Z I add: {"cacheControlHeader":"public, max-age=31536000, immutable","bucket":"opencaves.appspot.com","deleteOriginalFile":1,"message":"Initializing function resize image with configuration","includePathList":["/caves/*/images"],"imageSizes":{"1024":{"fit":"outside","width":1024},"1536":{"width":1536,"fit":"outside"},"coverImage":{"height":338,"fit":"cover","width":601},"mediaThumbnail":{"fit":"inside","height":800,"width":400},"4k":{"fit":"outside","width":3840},"resultThumbnail":{"height":451,"fit":"outside","width":361}},"makePublic":true,"animated":true,"imageTypes":["webp"],"outputOptions":{"webp":{"preset":"photo","smartSubsample":true,"effort":4,"quality":50}},"failedImagesPath":"failed","resizedImagesPath":"../thumbnails","location":"northamerica-northeast1","doBackfill":true}
2024-04-25T11:34:38.396212Z I add: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:38.416201Z I onassetcreated: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2024-04-25T11:34:39.603752350Z N onAssetDeleted: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetDeleted","response":{"buildConfig":{"runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","entryPoint":"onAssetDeleted","dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","source":{}},"updateTime":"2024-04-25T11:34:29.198985545Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8"},"environment":"GEN_2","state":"ACTIVE","@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetDeleted","eventTrigger":{"eventType":"google.cloud.firestore.document.v1.deleted","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","trigger":"projects/opencaves/locations/northamerica-northeast1/triggers/onassetdeleted-471273","eventFilters":[{"attribute":"namespace","value":"(default)"},{"value":"cavesAssets/{assetId}","operator":"match-path-pattern","attribute":"document"},{"value":"(default)","attribute":"database"}],"triggerRegion":"northamerica-northeast1","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","pubsubTopic":"projects/opencaves/topics/eventarc-northamerica-northeast1-onassetdeleted-471273-060"},"createTime":"2024-01-29T12:45:17.377971300Z","url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/onAssetDeleted","serviceConfig":{"revision":"onassetdeleted-00006-duh","maxInstanceCount":100,"maxInstanceRequestConcurrency":80,"allTrafficOnLatestRevision":true,"timeoutSeconds":60,"availableCpu":"1","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","ingressSettings":"ALLOW_ALL","uri":"https://onassetdeleted-kj7bwamnvq-nn.a.run.app","availableMemory":"256Mi"}},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:39.603753001Z N onAssetUpdated: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetUpdated","response":{"buildConfig":{"dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","runtime":"nodejs20","source":{},"entryPoint":"onAssetUpdated","dockerRegistry":"ARTIFACT_REGISTRY"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetUpdated","createTime":"2024-01-29T12:45:17.448390376Z","environment":"GEN_2","labels":{"firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","firebase-functions-codebase":"js","deployment-tool":"cli-firebase"},"state":"ACTIVE","@type":"type.googleapis.com/google.cloud.functions.v2.Function","updateTime":"2024-04-25T11:34:29.167690750Z","serviceConfig":{"availableMemory":"256Mi","ingressSettings":"ALLOW_ALL","timeoutSeconds":60,"availableCpu":"1","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","revision":"onassetupdated-00006-cek","maxInstanceCount":100,"allTrafficOnLatestRevision":true,"maxInstanceRequestConcurrency":80,"uri":"https://onassetupdated-kj7bwamnvq-nn.a.run.app"},"url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/onAssetUpdated","eventTrigger":{"eventFilters":[{"value":"(default)","attribute":"database"},{"value":"(default)","attribute":"namespace"},{"operator":"match-path-pattern","value":"cavesAssets/{assetId}","attribute":"document"}],"serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventType":"google.cloud.firestore.document.v1.updated","trigger":"projects/opencaves/locations/northamerica-northeast1/triggers/onassetupdated-053569","triggerRegion":"northamerica-northeast1","pubsubTopic":"projects/opencaves/topics/eventarc-northamerica-northeast1-onassetupdated-053569-148"}},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:39.741973Z N assignRole: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v1.CloudFunctionsService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/assignRole"}
2024-04-25T11:34:39.790872646Z N beforeCreated: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/beforeCreated","response":{"environment":"GEN_2","createTime":"2024-01-29T12:45:17.448996001Z","labels":{"deployment-blocking":"before-create","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","firebase-functions-codebase":"js","deployment-tool":"cli-firebase"},"url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/beforeCreated","name":"projects/opencaves/locations/northamerica-northeast1/functions/beforeCreated","serviceConfig":{"maxInstanceCount":100,"maxInstanceRequestConcurrency":80,"availableCpu":"1","ingressSettings":"ALLOW_ALL","timeoutSeconds":60,"availableMemory":"256Mi","uri":"https://beforecreated-kj7bwamnvq-nn.a.run.app","allTrafficOnLatestRevision":true,"revision":"beforecreated-00006-vow","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com"},"state":"ACTIVE","buildConfig":{"entryPoint":"beforeCreated","dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","dockerRegistry":"ARTIFACT_REGISTRY","runtime":"nodejs20","source":{}},"updateTime":"2024-04-25T11:34:29.091498354Z","@type":"type.googleapis.com/google.cloud.functions.v2.Function"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:39.791556190Z N api: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/api","response":{"name":"projects/opencaves/locations/northamerica-northeast1/functions/api","updateTime":"2024-04-25T11:34:29.037904937Z","url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/api","state":"ACTIVE","@type":"type.googleapis.com/google.cloud.functions.v2.Function","buildConfig":{"entryPoint":"api","source":{},"dockerRegistry":"ARTIFACT_REGISTRY","dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","runtime":"nodejs20"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","firebase-functions-codebase":"js"},"serviceConfig":{"maxInstanceRequestConcurrency":80,"availableCpu":"1","maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","allTrafficOnLatestRevision":true,"serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","availableMemory":"256Mi","revision":"api-00007-por","timeoutSeconds":60,"uri":"https://api-kj7bwamnvq-nn.a.run.app"},"environment":"GEN_2","createTime":"2023-08-22T21:24:29.552293814Z"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:40.042500798Z N setCoverImage: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/setCoverImage","response":{"serviceConfig":{"timeoutSeconds":60,"allTrafficOnLatestRevision":true,"uri":"https://setcoverimage-kj7bwamnvq-nn.a.run.app","availableMemory":"256Mi","revision":"setcoverimage-00006-qut","maxInstanceRequestConcurrency":80,"serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","availableCpu":"1"},"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/opencaves/locations/northamerica-northeast1/functions/setCoverImage","createTime":"2024-01-29T12:45:17.453957668Z","state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8"},"buildConfig":{"dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","source":{},"entryPoint":"setCoverImage","dockerRegistry":"ARTIFACT_REGISTRY","runtime":"nodejs20"},"updateTime":"2024-04-25T11:34:29.157956334Z","eventTrigger":{"retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"value":"(default)","attribute":"database"},{"value":"(default)","attribute":"namespace"},{"operator":"match-path-pattern","attribute":"document","value":"cavesAssets/{assetId}"}],"eventType":"google.cloud.firestore.document.v1.created","pubsubTopic":"projects/opencaves/topics/eventarc-northamerica-northeast1-setcoverimage-729506-999","triggerRegion":"northamerica-northeast1","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","trigger":"projects/opencaves/locations/northamerica-northeast1/triggers/setcoverimage-729506"},"environment":"GEN_2","url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/setCoverImage"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:40.099951Z N backfillResizedImages: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v1.CloudFunctionsService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/backfillResizedImages"}
2024-04-25T11:34:40.368375846Z N onAssetCreated: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetCreated","response":{"state":"ACTIVE","environment":"GEN_2","url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/onAssetCreated","buildConfig":{"dockerRegistry":"ARTIFACT_REGISTRY","entryPoint":"onAssetCreated","runtime":"nodejs20","dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","source":{}},"labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","deployment-tool":"cli-firebase"},"@type":"type.googleapis.com/google.cloud.functions.v2.Function","serviceConfig":{"ingressSettings":"ALLOW_ALL","maxInstanceRequestConcurrency":80,"revision":"onassetcreated-00006-hac","uri":"https://onassetcreated-kj7bwamnvq-nn.a.run.app","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","availableMemory":"256Mi","availableCpu":"1","maxInstanceCount":100,"timeoutSeconds":60,"allTrafficOnLatestRevision":true},"updateTime":"2024-04-25T11:34:29.266140548Z","eventTrigger":{"trigger":"projects/opencaves/locations/northamerica-northeast1/triggers/onassetcreated-087227","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"value":"(default)","attribute":"database"},{"value":"(default)","attribute":"namespace"},{"value":"cavesAssets/{assetId}","operator":"match-path-pattern","attribute":"document"}],"pubsubTopic":"projects/opencaves/topics/eventarc-northamerica-northeast1-onassetcreated-087227-786","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","triggerRegion":"northamerica-northeast1"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/onAssetCreated","createTime":"2024-01-29T12:45:17.361585192Z"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
2024-04-25T11:34:40.408969350Z N add: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"christian.remillard@gmail.com","principalSubject":"user:christian.remillard@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/opencaves/locations/northamerica-northeast1/functions/add","response":{"url":"https://northamerica-northeast1-opencaves.cloudfunctions.net/add","serviceConfig":{"timeoutSeconds":60,"maxInstanceRequestConcurrency":80,"ingressSettings":"ALLOW_ALL","uri":"https://add-kj7bwamnvq-nn.a.run.app","availableMemory":"256Mi","maxInstanceCount":100,"serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com","allTrafficOnLatestRevision":true,"revision":"add-00006-low","availableCpu":"1"},"name":"projects/opencaves/locations/northamerica-northeast1/functions/add","@type":"type.googleapis.com/google.cloud.functions.v2.Function","updateTime":"2024-04-25T11:33:41.329916002Z","labels":{"firebase-functions-codebase":"js","firebase-functions-hash":"42f001f4ecf7f4bbcd66f9c2adfbf51d1d3688a8","deployment-tool":"cli-firebase"},"state":"ACTIVE","eventTrigger":{"trigger":"projects/opencaves/locations/northamerica-northeast1/triggers/add-376244","pubsubTopic":"projects/opencaves/topics/eventarc-northamerica-northeast1-add-376244-259","triggerRegion":"northamerica-northeast1","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"bucket","value":"opencaves.appspot.com"}],"eventType":"google.cloud.storage.object.v1.finalized","serviceAccountEmail":"800148490732-compute@developer.gserviceaccount.com"},"buildConfig":{"entryPoint":"add","dockerRepository":"projects/opencaves/locations/northamerica-northeast1/repositories/gcf-artifacts","dockerRegistry":"ARTIFACT_REGISTRY","source":{},"runtime":"nodejs20"},"environment":"GEN_2","createTime":"2024-01-29T12:44:19.615752604Z"},"resourceLocation":{"currentLocations":["northamerica-northeast1"]}}
